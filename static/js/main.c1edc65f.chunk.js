(this.webpackJsonptictactoe=this.webpackJsonptictactoe||[]).push([[0],{34:function(e,a,t){},43:function(e,a,t){"use strict";t.r(a);var l=t(3),c=t(1),s=t.n(c),n=t(26),i=t.n(n),o=(t(34),t(10)),r=t(11),d=t(13),u=t(12),m=t(14),h=t(4),b=t(21);t(35);b.a.initializeApp({apiKey:"AIzaSyAkSHQyuR6FQ8FkN9atRMvF9Nhbba0B1os",authDomain:"reacttictactoe-69083.firebaseapp.com",databaseURL:"https://reacttictactoe-69083-default-rtdb.firebaseio.com",projectId:"reacttictactoe-69083",storageBucket:"reacttictactoe-69083.appspot.com",messagingSenderId:"705467616619",appId:"1:705467616619:web:d996b0ba5efecc294e102e"});var v=b.a,O=function(e){Object(d.a)(t,e);var a=Object(u.a)(t);function t(){var e;return Object(o.a)(this,t),(e=a.call(this)).onStart=function(a){a.preventDefault();var t=v.database().ref(),l=e.state,c={cellOne:l.cellOne,cellTwo:l.cellTwo,cellThree:l.cellThree,cellFour:l.cellFour,cellFive:l.cellFive,cellSix:l.cellSix,cellSeven:l.cellSeven,cellEight:l.cellEight,cellNine:l.cellNine,boardClass:l.boardClass,gameOutcome:l.gameOutcome,playerOneJoined:l.playerOneJoined,playerTwoJoined:l.playerTwoJoined},s=t.push(c).key;e.setState({key:s,toLobby:!0})},e.state={key:"",cellOne:"",cellTwo:"",cellThree:"",cellFour:"",cellFive:"",cellSix:"",cellSeven:"",cellEight:"",cellNine:"",boardClass:"x",gameOutcome:"",playerOneJoined:"",playerTwoJoined:"",toLobby:!1},e}return Object(r.a)(t,[{key:"render",value:function(){var e=this.state.key;return!0===this.state.toLobby?Object(l.jsx)(h.a,{to:"/lobby/".concat(e)}):Object(l.jsxs)("main",{children:[Object(l.jsx)("h1",{children:"Tic Tac Toe"}),Object(l.jsx)("p",{children:"short description about how the game works"}),Object(l.jsx)("form",{onSubmit:this.onStart,children:Object(l.jsx)("button",{type:"submit",children:"submit"})})]})}}]),t}(c.Component),g=Object(h.f)(O),p=function(e){Object(d.a)(t,e);var a=Object(u.a)(t);function t(){var e;return Object(o.a)(this,t),(e=a.call(this)).state={game:{}},e}return Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=this.props.match.params.gameKey;v.database().ref(a).on("value",(function(a){e.setState({game:a.val()})}))}},{key:"render",value:function(){var e=this.props.match.params.gameKey;return Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{children:"https://armanaliani.github.io/reactGame/gameboard/".concat(e)}),Object(l.jsx)(m.b,{to:"/gameboard/".concat(e),children:"Play"})]})}}]),t}(c.Component),y=t(28),f=function(e){Object(d.a)(t,e);var a=Object(u.a)(t);function t(){var e;return Object(o.a)(this,t),(e=a.call(this)).handleClick=function(a){var t=a.target,l=e.state,c=l.boardClass,s=a.target.className.split(" "),n=s.slice(1,2).toString();if(!s.includes("x")&&!s.includes("circle")){var i=function(e,a){e.classList.add(a)},o=e.props.match.params.gameKey,r=[l.cellOne,l.cellTwo,l.cellThree,l.cellFour,l.cellFive,l.cellSix,l.cellSeven,l.cellEight,l.cellNine,l.gameOver];r.includes("x")||r.includes("circle")||e.setStorage(o,"");var d=o,u=window.sessionStorage.getItem(d);if(""===l.playerOneJoined&&""===l.playerTwoJoined)"x"===l.boardClass&&(e.setStorage(o,"playerX"),e.updatePlayerStatus("playerOneJoined","yes"),e.setState({playerOneJoined:"yes"}),e.setStateClass(n),i(t,c),e.switchTurns());else if("yes"===l.playerOneJoined&&""===l.playerTwoJoined&&null===u)"circle"===l.boardClass&&(e.setStorage(o,"playerO"),e.updatePlayerStatus("playerTwoJoined","yes"),e.setState({playerTwoJoined:"yes"}),e.setStateClass(n),i(t,c),e.switchTurns());else if(l.playerOneJoined&&"yes"===l.playerTwoJoined)if("playerX"===u)"x"===l.boardClass&&(i(t,c),e.setStateClass(n),e.switchTurns());else if("playerO"===u)"circle"===l.boardClass&&(i(t,c),e.setStateClass(n),e.switchTurns());else if(null===u)return;e.checkWin(c)?(e.endGame(!1),e.setState({gameOutcome:c})):e.isDraw()&&(e.endGame(!0),e.setState({gameOutcome:"draw"}))}},e.switchTurns=function(){var a=e.state.boardClass;"x"===a?(e.setState({boardClass:"circle"}),e.updateBoardClass("boardClass")):"circle"===a&&(e.setState({boardClass:"x"}),e.updateBoardClass("boardClass"))},e.checkWin=function(e){var a=document.querySelectorAll("[data-cell]");return[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]].some((function(t){return t.every((function(t){return a[t].classList.contains(e)}))}))},e.isDraw=function(){var e=document.querySelectorAll("[data-cell]");return Object(y.a)(e).every((function(e){return e.classList.contains("x")||e.classList.contains("circle")}))},e.endGame=function(a){var t=e.props.match.params.gameKey,l=e.state.boardClass,c=document.getElementById("winningMessage"),s=document.querySelector("[data-winning-message-text]");"x"===e.state.gameOutcome?(s.innerText="X's Win!",e.setState({gameOver:!0})):"circle"===e.state.gameOutcome?(s.innerText="O's Win!",e.setState({gameOver:!0})):a||"draw"===e.state.gameOutcome?(s.innerText="Draw!",""===e.state.gameOutcome&&e.setState({gameOutcome:"draw",gameOver:!0}),e.updateGameOutcome("draw")):"x"===l?(s.innerText="X's Win!",""===e.state.gameOutcome&&e.setState({gameOutcome:"x",gameOver:!0}),e.updateGameOutcome("x")):"circle"===l&&(s.innerText="O's Win!",""===e.state.gameOutcome&&e.setState({gameOutcome:"circle",gameOver:!0}),e.updateGameOutcome("circle")),c.classList.add("show"),function(e){window.sessionStorage.clear(e)}(t)},e.endGamePlayerTwo=function(a){var t=e.props.match.params.gameKey,l=document.getElementById("winningMessage"),c=document.querySelector("[data-winning-message-text]");"x"===e.state.gameOutcome?(c.innerText="X's Win!",e.setState({gameOver:!0})):"circle"===e.state.gameOutcome?(c.innerText="O's Win!",e.setState({gameOver:!0})):(a||"draw"===e.state.gameOutcome)&&(c.innerText="Draw!",""===e.state.gameOutcome&&e.setState({gameOutcome:"draw",gameOver:!0})),l.classList.add("show"),function(e){window.sessionStorage.clear(e)}(t)},e.handleRestart=function(){document.querySelectorAll("[data-cell]").forEach((function(e){e.classList.remove("x"),e.classList.remove("circle")})),document.getElementById("winningMessage").classList.remove("show"),e.setState({boardClass:"x",cellOne:"",cellTwo:"",cellThree:"",cellFour:"",cellFive:"",cellSix:"",cellSeven:"",cellEight:"",cellNine:"",gameOutcome:"",gameOver:!1}),e.updateNewGame()},e.handleRestartMessage=function(){""===e.state.gameOutcome&&document.getElementById("winningMessage").classList.remove("show")},e.updateNewGame=function(){var a=e.props.match.params.gameKey,t=v.database().ref("".concat(a,"/boardClass"));t.once("value",(function(e){e.val();t.set("x")})),[v.database().ref("".concat(a,"/cellOne")),v.database().ref("".concat(a,"/cellTwo")),v.database().ref("".concat(a,"/cellThree")),v.database().ref("".concat(a,"/cellFour")),v.database().ref("".concat(a,"/cellFive")),v.database().ref("".concat(a,"/cellSix")),v.database().ref("".concat(a,"/cellSeven")),v.database().ref("".concat(a,"/cellEight")),v.database().ref("".concat(a,"/cellNine")),v.database().ref("".concat(a,"/gameOutcome")),v.database().ref("".concat(a,"/playerOneJoined")),v.database().ref("".concat(a,"/playerTwoJoined"))].forEach((function(e){e.once("value",(function(a){a.val();e.set("")}))}))},e.updateGameOutcome=function(a){var t=e.props.match.params.gameKey,l=v.database().ref("".concat(t,"/gameOutcome"));l.once("value",(function(e){var t=e.val();t=a,l.set(t)}))},e.updateCellData=function(a){var t=e.props.match.params.gameKey,l=v.database().ref("".concat(t,"/").concat(a)),c=e.state.boardClass;l.once("value",(function(e){var a=e.val();"x"===c?(a="x",l.set(a)):"circle"===c&&(a="circle",l.set(a))}))},e.updatePlayerStatus=function(a,t){var l=e.props.match.params.gameKey,c=v.database().ref("".concat(l,"/").concat(a));c.once("value",(function(e){var a=e.val();a=t,c.set(a)}))},e.updateBoardClass=function(a){var t=e.props.match.params.gameKey,l=v.database().ref("".concat(t,"/").concat(a)),c=e.state.boardClass;l.once("value",(function(e){var a=e.val();"x"===c?(a="circle",l.set(a)):"circle"===c&&(a="x",l.set(a))}))},e.state={game:{},cellOne:"",cellTwo:"",cellThree:"",cellFour:"",cellFive:"",cellSix:"",cellSeven:"",cellEight:"",cellNine:"",boardClass:"x",gameOutcome:"",playerOneJoined:"",playerTwoJoined:"",gameOver:!1,extraPlayer:!1},e}return Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=this.props.match.params.gameKey;v.database().ref(a).on("value",(function(t){e.setState({game:t.val(),cellOne:t.val().cellOne,cellTwo:t.val().cellTwo,cellThree:t.val().cellThree,cellFour:t.val().cellFour,cellFive:t.val().cellFive,cellSix:t.val().cellSix,cellSeven:t.val().cellSeven,cellEight:t.val().cellEight,cellNine:t.val().cellNine,boardClass:t.val().boardClass,gameOutcome:t.val().gameOutcome,playerOneJoined:t.val().playerOneJoined,playerTwoJoined:t.val().playerTwoJoined}),e.extraPlayer(a),e.checkWin(e.state.boardClass)?e.endGame(!1):e.isDraw()&&(e.endGamePlayerTwo(!0),e.setState({gameOutcome:"draw"})),e.handleRestartMessage()}))}},{key:"setStateClass",value:function(e){var a=this.state.boardClass;"cellOne"===e?(this.setState({cellOne:a}),this.updateCellData("cellOne")):"cellTwo"===e?(this.setState({cellTwo:a}),this.updateCellData("cellTwo")):"cellThree"===e?(this.setState({cellThree:a}),this.updateCellData("cellThree")):"cellFour"===e?(this.setState({cellFour:a}),this.updateCellData("cellFour")):"cellFive"===e?(this.setState({cellFive:a}),this.updateCellData("cellFive")):"cellSix"===e?(this.setState({cellSix:a}),this.updateCellData("cellSix")):"cellSeven"===e?(this.setState({cellSeven:a}),this.updateCellData("cellSeven")):"cellEight"===e?(this.setState({cellEight:a}),this.updateCellData("cellEight")):"cellNine"===e&&(this.setState({cellNine:a}),this.updateCellData("cellNine"))}},{key:"setStorage",value:function(e,a){var t=e,l=[a];window.sessionStorage.setItem(t,l)}},{key:"extraPlayer",value:function(e){var a=this.state,t=e,l=this.state.boardClass,c=window.sessionStorage.getItem(t);"yes"===a.playerOneJoined&&"yes"===a.playerTwoJoined&&null===c&&(this.checkWin(l)||this.isDraw()||!1!==a.gameOver||(console.log("you who"),this.setState({extraPlayer:!0})))}},{key:"render",value:function(){var e=this.state.boardClass,a=this.state;return!0===a.extraPlayer?Object(l.jsx)(h.a,{to:"/"}):Object(l.jsxs)("main",{children:[Object(l.jsxs)("div",{className:"board ".concat(e),id:"board",children:[Object(l.jsx)("div",{className:"cell cellOne ".concat(a.cellOne),"data-cell":!0,onClick:this.handleClick}),Object(l.jsx)("div",{className:"cell cellTwo ".concat(a.cellTwo),"data-cell":!0,onClick:this.handleClick}),Object(l.jsx)("div",{className:"cell cellThree ".concat(a.cellThree),"data-cell":!0,onClick:this.handleClick}),Object(l.jsx)("div",{className:"cell cellFour ".concat(a.cellFour),"data-cell":!0,onClick:this.handleClick}),Object(l.jsx)("div",{className:"cell cellFive ".concat(a.cellFive),"data-cell":!0,onClick:this.handleClick}),Object(l.jsx)("div",{className:"cell cellSix ".concat(a.cellSix),"data-cell":!0,onClick:this.handleClick}),Object(l.jsx)("div",{className:"cell cellSeven ".concat(a.cellSeven),"data-cell":!0,onClick:this.handleClick}),Object(l.jsx)("div",{className:"cell cellEight ".concat(a.cellEight),"data-cell":!0,onClick:this.handleClick}),Object(l.jsx)("div",{className:"cell cellNine ".concat(a.cellNine),"data-cell":!0,onClick:this.handleClick})]}),Object(l.jsxs)("div",{className:"winning-message",id:"winningMessage",children:[Object(l.jsx)("div",{"data-winning-message-text":!0}),Object(l.jsxs)("div",{className:"messageButtons",children:[Object(l.jsx)("button",{id:"restartButton",onClick:this.handleRestart,children:"Restart"}),Object(l.jsx)(m.b,{to:"/",className:"newGame",onClick:this.handleRestart,children:"New Game"})]})]})]})}}]),t}(c.Component),S=function(e){Object(d.a)(t,e);var a=Object(u.a)(t);function t(){return Object(o.a)(this,t),a.apply(this,arguments)}return Object(r.a)(t,[{key:"render",value:function(){return Object(l.jsx)(m.a,{basename:"/reactGame",children:Object(l.jsxs)(c.Fragment,{children:[Object(l.jsx)(h.b,{exact:!0,path:"/",component:g}),Object(l.jsx)(h.b,{path:"/lobby/:gameKey",component:p}),Object(l.jsx)(h.b,{path:"/gameboard/:gameKey",component:f})]})})}}]),t}(c.Component),j=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,44)).then((function(a){var t=a.getCLS,l=a.getFID,c=a.getFCP,s=a.getLCP,n=a.getTTFB;t(e),l(e),c(e),s(e),n(e)}))};i.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(S,{})}),document.getElementById("root")),j()}},[[43,1,2]]]);
//# sourceMappingURL=main.c1edc65f.chunk.js.map