(this.webpackJsonptictactoe=this.webpackJsonptictactoe||[]).push([[0],{34:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var l=a(1),c=a(2),n=a.n(c),s=a(26),i=a.n(s),r=(a(34),a(11)),o=a(12),d=a(14),u=a(13),m=a(10),h=a(4),b=a(21);a(35);b.a.initializeApp({apiKey:"AIzaSyAkSHQyuR6FQ8FkN9atRMvF9Nhbba0B1os",authDomain:"reacttictactoe-69083.firebaseapp.com",databaseURL:"https://reacttictactoe-69083-default-rtdb.firebaseio.com",projectId:"reacttictactoe-69083",storageBucket:"reacttictactoe-69083.appspot.com",messagingSenderId:"705467616619",appId:"1:705467616619:web:d996b0ba5efecc294e102e"});var v=b.a,O=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).onStart=function(t){t.preventDefault();var a=v.database().ref(),l=e.state,c={cellOne:l.cellOne,cellTwo:l.cellTwo,cellThree:l.cellThree,cellFour:l.cellFour,cellFive:l.cellFive,cellSix:l.cellSix,cellSeven:l.cellSeven,cellEight:l.cellEight,cellNine:l.cellNine,boardClass:l.boardClass,gameOutcome:l.gameOutcome,playerOneJoined:l.playerOneJoined,playerTwoJoined:l.playerTwoJoined},n=a.push(c).key;e.setState({key:n,toLobby:!0})},e.state={key:"",cellOne:"",cellTwo:"",cellThree:"",cellFour:"",cellFive:"",cellSix:"",cellSeven:"",cellEight:"",cellNine:"",boardClass:"x",gameOutcome:"",playerOneJoined:"",playerTwoJoined:"",toLobby:!1},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state.key;return!0===this.state.toLobby?Object(l.jsx)(h.a,{to:"/lobby/".concat(e)}):Object(l.jsxs)("main",{className:"mainPageContent",children:[Object(l.jsx)("h1",{children:"Tic Tac Toe"}),Object(l.jsx)("p",{children:"play tic tac toe online with friends"}),Object(l.jsx)("p",{children:"start game to get your game link to send to a friend"}),Object(l.jsx)("form",{onSubmit:this.onStart,children:Object(l.jsx)("button",{type:"submit",children:"start game"})})]})}}]),a}(c.Component),g=Object(h.f)(O),p=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).copyLink=function(){var e=document.getElementById("gameUrl").textContent;window.navigator.clipboard.writeText(e)},e.state={game:{}},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.gameKey;v.database().ref(t).on("value",(function(t){e.setState({game:t.val()})}))}},{key:"render",value:function(){var e=this.props.match.params.gameKey;return Object(l.jsxs)("div",{className:"mainPageContent",children:[Object(l.jsx)("p",{children:"heres your unique game link, send it to your opponent"}),Object(l.jsxs)("div",{className:"gameLinkDiv",children:[Object(l.jsx)("p",{id:"gameUrl",children:"https://armanaliani.github.io/reactGame/gameboard/".concat(e)}),Object(l.jsx)("button",{onClick:this.copyLink,children:"copy url"})]}),Object(l.jsx)(m.b,{to:"/gameboard/".concat(e),children:"Play"})]})}}]),a}(c.Component),j=a(28),y=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).handleClick=function(t){var a=t.target,l=e.state,c=l.boardClass,n=t.target.className.split(" "),s=n.slice(1,2).toString();if(!n.includes("x")&&!n.includes("circle")){var i=function(e,t){e.classList.add(t)},r=e.props.match.params.gameKey,o=[l.cellOne,l.cellTwo,l.cellThree,l.cellFour,l.cellFive,l.cellSix,l.cellSeven,l.cellEight,l.cellNine,l.gameOver];o.includes("x")||o.includes("circle")||e.setStorage(r,"");var d=r,u=window.sessionStorage.getItem(d);if(""===l.playerOneJoined&&""===l.playerTwoJoined)"x"===l.boardClass&&(e.setStorage(r,"playerX"),e.updatePlayerStatus("playerOneJoined","yes"),e.setState({playerOneJoined:"yes"}),e.setStateClass(s),i(a,c),e.switchTurns());else if("yes"===l.playerOneJoined&&""===l.playerTwoJoined&&null===u)"circle"===l.boardClass&&(e.setStorage(r,"playerO"),e.updatePlayerStatus("playerTwoJoined","yes"),e.setState({playerTwoJoined:"yes"}),e.setStateClass(s),i(a,c),e.switchTurns());else if(l.playerOneJoined&&"yes"===l.playerTwoJoined)if("playerX"===u)"x"===l.boardClass&&(i(a,c),e.setStateClass(s),e.switchTurns());else if("playerO"===u)"circle"===l.boardClass&&(i(a,c),e.setStateClass(s),e.switchTurns());else if(null===u)return;e.checkWin(c)?(e.endGame(!1),e.setState({gameOutcome:c})):e.isDraw()&&(e.endGame(!0),e.setState({gameOutcome:"draw"}))}},e.switchTurns=function(){var t=e.state.boardClass;"x"===t?(e.setState({boardClass:"circle"}),e.updateBoardClass("boardClass")):"circle"===t&&(e.setState({boardClass:"x"}),e.updateBoardClass("boardClass"))},e.checkWin=function(e){var t=document.querySelectorAll("[data-cell]");return[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]].some((function(a){return a.every((function(a){return t[a].classList.contains(e)}))}))},e.isDraw=function(){var e=document.querySelectorAll("[data-cell]");return Object(j.a)(e).every((function(e){return e.classList.contains("x")||e.classList.contains("circle")}))},e.endGame=function(t){var a=e.props.match.params.gameKey,l=e.state.boardClass,c=document.getElementById("winningMessage"),n=document.querySelector("[data-winning-message-text]");"x"===e.state.gameOutcome?(n.innerText="X's Win!",e.setState({gameOver:!0})):"circle"===e.state.gameOutcome?(n.innerText="O's Win!",e.setState({gameOver:!0})):t||"draw"===e.state.gameOutcome?(n.innerText="Draw!",""===e.state.gameOutcome&&e.setState({gameOutcome:"draw",gameOver:!0}),e.updateGameOutcome("draw")):"x"===l?(n.innerText="X's Win!",""===e.state.gameOutcome&&e.setState({gameOutcome:"x",gameOver:!0}),e.updateGameOutcome("x")):"circle"===l&&(n.innerText="O's Win!",""===e.state.gameOutcome&&e.setState({gameOutcome:"circle",gameOver:!0}),e.updateGameOutcome("circle")),c.classList.add("show"),function(e){window.sessionStorage.clear(e)}(a)},e.endGamePlayerTwo=function(t){var a=e.props.match.params.gameKey,l=document.getElementById("winningMessage"),c=document.querySelector("[data-winning-message-text]");"x"===e.state.gameOutcome?(c.innerText="X's Win!",e.setState({gameOver:!0})):"circle"===e.state.gameOutcome?(c.innerText="O's Win!",e.setState({gameOver:!0})):(t||"draw"===e.state.gameOutcome)&&(c.innerText="Draw!",""===e.state.gameOutcome&&e.setState({gameOutcome:"draw",gameOver:!0})),l.classList.add("show"),function(e){window.sessionStorage.clear(e)}(a)},e.handleRestart=function(){document.querySelectorAll("[data-cell]").forEach((function(e){e.classList.remove("x"),e.classList.remove("circle")})),document.getElementById("winningMessage").classList.remove("show"),e.setState({boardClass:"x",cellOne:"",cellTwo:"",cellThree:"",cellFour:"",cellFive:"",cellSix:"",cellSeven:"",cellEight:"",cellNine:"",gameOutcome:"",gameOver:!1}),e.updateNewGame()},e.handleRestartMessage=function(){""===e.state.gameOutcome&&document.getElementById("winningMessage").classList.remove("show")},e.updateNewGame=function(){var t=e.props.match.params.gameKey,a=v.database().ref("".concat(t,"/boardClass"));a.once("value",(function(e){e.val();a.set("x")})),[v.database().ref("".concat(t,"/cellOne")),v.database().ref("".concat(t,"/cellTwo")),v.database().ref("".concat(t,"/cellThree")),v.database().ref("".concat(t,"/cellFour")),v.database().ref("".concat(t,"/cellFive")),v.database().ref("".concat(t,"/cellSix")),v.database().ref("".concat(t,"/cellSeven")),v.database().ref("".concat(t,"/cellEight")),v.database().ref("".concat(t,"/cellNine")),v.database().ref("".concat(t,"/gameOutcome")),v.database().ref("".concat(t,"/playerOneJoined")),v.database().ref("".concat(t,"/playerTwoJoined"))].forEach((function(e){e.once("value",(function(t){t.val();e.set("")}))}))},e.updateGameOutcome=function(t){var a=e.props.match.params.gameKey,l=v.database().ref("".concat(a,"/gameOutcome"));l.once("value",(function(e){var a=e.val();a=t,l.set(a)}))},e.updateCellData=function(t){var a=e.props.match.params.gameKey,l=v.database().ref("".concat(a,"/").concat(t)),c=e.state.boardClass;l.once("value",(function(e){var t=e.val();"x"===c?(t="x",l.set(t)):"circle"===c&&(t="circle",l.set(t))}))},e.updatePlayerStatus=function(t,a){var l=e.props.match.params.gameKey,c=v.database().ref("".concat(l,"/").concat(t));c.once("value",(function(e){var t=e.val();t=a,c.set(t)}))},e.updateBoardClass=function(t){var a=e.props.match.params.gameKey,l=v.database().ref("".concat(a,"/").concat(t)),c=e.state.boardClass;l.once("value",(function(e){var t=e.val();"x"===c?(t="circle",l.set(t)):"circle"===c&&(t="x",l.set(t))}))},e.state={game:{},cellOne:"",cellTwo:"",cellThree:"",cellFour:"",cellFive:"",cellSix:"",cellSeven:"",cellEight:"",cellNine:"",boardClass:"x",gameOutcome:"",playerOneJoined:"",playerTwoJoined:"",gameOver:!1,extraPlayer:!1},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.gameKey;v.database().ref(t).on("value",(function(a){e.setState({game:a.val(),cellOne:a.val().cellOne,cellTwo:a.val().cellTwo,cellThree:a.val().cellThree,cellFour:a.val().cellFour,cellFive:a.val().cellFive,cellSix:a.val().cellSix,cellSeven:a.val().cellSeven,cellEight:a.val().cellEight,cellNine:a.val().cellNine,boardClass:a.val().boardClass,gameOutcome:a.val().gameOutcome,playerOneJoined:a.val().playerOneJoined,playerTwoJoined:a.val().playerTwoJoined}),e.extraPlayer(t),e.checkWin(e.state.boardClass)?e.endGame(!1):e.isDraw()&&(e.endGamePlayerTwo(!0),e.setState({gameOutcome:"draw"})),e.handleRestartMessage()}))}},{key:"setStateClass",value:function(e){var t=this.state.boardClass;"cellOne"===e?(this.setState({cellOne:t}),this.updateCellData("cellOne")):"cellTwo"===e?(this.setState({cellTwo:t}),this.updateCellData("cellTwo")):"cellThree"===e?(this.setState({cellThree:t}),this.updateCellData("cellThree")):"cellFour"===e?(this.setState({cellFour:t}),this.updateCellData("cellFour")):"cellFive"===e?(this.setState({cellFive:t}),this.updateCellData("cellFive")):"cellSix"===e?(this.setState({cellSix:t}),this.updateCellData("cellSix")):"cellSeven"===e?(this.setState({cellSeven:t}),this.updateCellData("cellSeven")):"cellEight"===e?(this.setState({cellEight:t}),this.updateCellData("cellEight")):"cellNine"===e&&(this.setState({cellNine:t}),this.updateCellData("cellNine"))}},{key:"setStorage",value:function(e,t){var a=e,l=[t];window.sessionStorage.setItem(a,l)}},{key:"extraPlayer",value:function(e){var t=this.state,a=e,l=this.state.boardClass,c=window.sessionStorage.getItem(a);"yes"===t.playerOneJoined&&"yes"===t.playerTwoJoined&&null===c&&(this.checkWin(l)||this.isDraw()||!1!==t.gameOver||(console.log("you who"),this.setState({extraPlayer:!0})))}},{key:"render",value:function(){var e=this.state.boardClass,t=this.state;return!0===t.extraPlayer?Object(l.jsx)(h.a,{to:"/"}):Object(l.jsxs)("main",{className:"mainPageContent",children:[Object(l.jsx)("div",{children:Object(l.jsxs)("p",{children:["player ",t.boardClass," turn"]})}),Object(l.jsxs)("div",{className:"board ".concat(e),id:"board",children:[Object(l.jsx)("div",{className:"cell cellOne ".concat(t.cellOne),"data-cell":!0,onClick:this.handleClick}),Object(l.jsx)("div",{className:"cell cellTwo ".concat(t.cellTwo),"data-cell":!0,onClick:this.handleClick}),Object(l.jsx)("div",{className:"cell cellThree ".concat(t.cellThree),"data-cell":!0,onClick:this.handleClick}),Object(l.jsx)("div",{className:"cell cellFour ".concat(t.cellFour),"data-cell":!0,onClick:this.handleClick}),Object(l.jsx)("div",{className:"cell cellFive ".concat(t.cellFive),"data-cell":!0,onClick:this.handleClick}),Object(l.jsx)("div",{className:"cell cellSix ".concat(t.cellSix),"data-cell":!0,onClick:this.handleClick}),Object(l.jsx)("div",{className:"cell cellSeven ".concat(t.cellSeven),"data-cell":!0,onClick:this.handleClick}),Object(l.jsx)("div",{className:"cell cellEight ".concat(t.cellEight),"data-cell":!0,onClick:this.handleClick}),Object(l.jsx)("div",{className:"cell cellNine ".concat(t.cellNine),"data-cell":!0,onClick:this.handleClick})]}),Object(l.jsxs)("div",{className:"winning-message",id:"winningMessage",children:[Object(l.jsx)("div",{"data-winning-message-text":!0}),Object(l.jsxs)("div",{className:"messageButtons",children:[Object(l.jsx)("button",{id:"restartButton",onClick:this.handleRestart,children:"Restart"}),Object(l.jsx)(m.b,{to:"/",className:"newGame",onClick:this.handleRestart,children:"New Game"})]})]})]})}}]),a}(c.Component),x=function(){return Object(l.jsx)("header",{children:Object(l.jsx)(m.b,{to:"/",tabIndex:"0",children:Object(l.jsx)("p",{children:"Home"})})})},f=function(){return Object(l.jsx)("footer",{children:Object(l.jsxs)("p",{children:["Created by ",Object(l.jsx)("a",{href:"https://alianicodes.com/",target:"_blank",rel:"noopener",children:"Arman Aliani"})]})})},S=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(l.jsx)(m.a,{basename:"/reactGame",children:Object(l.jsxs)(c.Fragment,{children:[Object(l.jsx)(x,{}),Object(l.jsx)(h.b,{exact:!0,path:"/",component:g}),Object(l.jsx)(h.b,{path:"/lobby/:gameKey",component:p}),Object(l.jsx)(h.b,{path:"/gameboard/:gameKey",component:y}),Object(l.jsx)(f,{})]})})}}]),a}(c.Component),w=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,44)).then((function(t){var a=t.getCLS,l=t.getFID,c=t.getFCP,n=t.getLCP,s=t.getTTFB;a(e),l(e),c(e),n(e),s(e)}))};i.a.render(Object(l.jsx)(n.a.StrictMode,{children:Object(l.jsx)(S,{})}),document.getElementById("root")),w()}},[[43,1,2]]]);
//# sourceMappingURL=main.c12ca7b1.chunk.js.map